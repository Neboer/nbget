# nbget

nbget是一个多线程下载工具。它和普通的多线程下载工具的最大区别就是，你可以为它的每一个线程都指定
一个独立的代理服务器。

这样做的优势是非常显然的，如果通过多代理下载的话，下载速度瓶颈很可能就不会出现在本地到远程的网络环境，而是本地到代理再到远程的网络环境。

程序使用c++开发，内部代码注释丰富，欢迎大家参与贡献。

# 编译
nbget使用c17标准，基于pthread库和libcurl。命令行编译请使用
```shell script
g++ *.cpp -lcurl -lpthread -o nbget
```
或者使用cmake构建。

# 使用
nbget目前只接受一种命令行参数
```shell script
nbget http://example.com/some_file http://localhost:1020 http://localhost:1022 http://localhost:1023 test_file
```
第一个参数是下载地址，最后一个参数是最终要生成的文件，中间的参数是代理服务器的列表。代理服务器最少要有一个，可以重复。

# 原理
nbget通过给不同的代理服务器分配下载任务，一边下载文件一边测试服务器速度，同时再根据服务器速度来分配下一块文件。
如果中间有服务器失败了，nbget将会彻底移除这个服务器并指派空余的代理重新下载损坏的文件块。

# 开发
nbget基于libcurl，从本质上应该和curl一样支持多种代理协议和传输协议，也可以自定义请求过程（比如添加HTTP请求头）
目前在代码中并没有体现。未来将会有更多可定制化的代理设置方法的。

# 宏

# bug
nbget目前已知有几个bug：
- release模式下程序可能会出现段错误，根据dump来看似乎是调度函数出现了问题。
- 没有很好地管理curl进程，有可能会出现SIGPIPE的问题。
- 没有支持windows编译。
希望大家帮忙改进程序。
